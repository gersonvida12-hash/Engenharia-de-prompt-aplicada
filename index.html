<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerador de Prompts da Singularidade Inversa</title>
    <link rel="stylesheet" href="index.css" />
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^0.12.0",
          "marked": "https://esm.sh/marked@^12.0.0"
        }
      }
    </script>
    <script type="module" src="index.tsx"></script>
  </head>
  <body>
    <main>
      <header class="hero-header">
        <button id="audit-button" class="audit-btn" aria-label="Executar Auditoria de C√≥digo" data-tooltip="Assistente de Otimiza√ß√£o">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4.36 6.16-1.55-1.55a1 1 0 0 0-1.42 0l-4.57 4.58-2.58-2.58a1 1 0 0 0-1.42 1.42l3.29 3.29a1 1 0 0 0 1.42 0l5.83-5.83a1 1 0 0 0 0-1.41z"></path></svg>
            <span class="sr-only">Auditoria de C√≥digo</span>
        </button>
        <h1>Gerador de Prompts da Singularidade Inversa</h1>
        <p>
          Transforme sua ideia em um prompt perfeitamente otimizado atrav√©s de um
          pipeline de tr√™s est√°gios: Arquitetura Causal, Destila√ß√£o por
          Restri√ß√£o e Expans√£o Evolutiva.
        </p>
      </header>

      <div class="prompt-card">
        <form id="prompt-form">
          <div class="form-group">
            <label for="prompt-input">1. Descreva sua necessidade ou objetivo</label>
            <textarea
              id="prompt-input"
              name="prompt-input"
              rows="5"
              placeholder="Ex: Crie uma postagem de blog sobre os benef√≠cios da energia solar para propriet√°rios de resid√™ncias, com um tom otimista e informativo."
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="file-input">2. Anexar arquivos (Opcional)</label>
            <div class="attachment-controls">
              <input type="file" id="file-input" multiple class="file-input-hidden" />
              <label for="file-input" class="file-input-label button-like">Escolher Arquivos</label>
              <div class="strategy-selector">
                 <label for="attachment-usage" class="sr-only">Estrat√©gia de Uso</label>
                 <select id="attachment-usage">
                    <option value="context">Usar como Contexto/Refer√™ncia</option>
                    <option value="style_source">Adotar como Fonte de Estilo</option>
                    <option value="structural_example">Seguir como Exemplo Estrutural</option>
                    <option value="fact_check">Usar para Valida√ß√£o Cruzada</option>
                 </select>
              </div>
            </div>
            <div class="loader-container hidden" id="attachment-loader">
                <div class="spinner"></div>
                <p>Processando arquivos...</p>
                <button type="button" id="cancel-attachment-processing" class="button-cancel">Cancelar</button>
            </div>
            <div id="file-list"></div>
          </div>

          <button type="submit" id="generate-button">
            Iniciar G√™nese de Prompt
          </button>
        </form>
      </div>


      <section id="behavior-guidance-container" class="hidden transitionable">
        <h2>Passo 1: Selecione a Arquitetura do Prompt</h2>
        <p>Analisamos sua solicita√ß√£o. Agora, escolha uma arquitetura t√©cnica para o prompt final.</p>
        <div class="loader-container" id="initial-prompt-loader">
           <div class="spinner"></div>
           <p id="initial-loader-text">Analisando solicita√ß√£o inicial...</p>
        </div>
        <div id="initial-prompt-display" class="hidden">
            <h3>Prompt Base Proposto:</h3>
            <blockquote id="initial-prompt-output"></blockquote>
            <h3>Selecione uma Arquitetura T√©cnica (Personalizada para seu Prompt):</h3>
            <div id="behavior-options">
              <!-- Bot√µes de arquitetura ser√£o inseridos dinamicamente aqui -->
            </div>
        </div>
      </section>

      <section id="result-container" class="hidden transitionable" aria-live="polite" aria-busy="false">
         <div id="dossier-header" class="hidden">
            <h2>Passo 2: Dossi√™ de G√™nese de Prompt</h2>
            <p>Com base na arquitetura selecionada, geramos um dossi√™ t√©cnico completo para o seu prompt.</p>
        </div>
        <div class="loader-container hidden" id="dossier-loader">
           <div class="spinner"></div>
           <p id="loader-text">Processando...</p>
        </div>
        <div id="output" class="markdown-content"></div>
      </section>
      
      <section id="evaluation-container" class="hidden transitionable">
        <h2>üî¨ An√°lise do Prompt Campe√£o</h2>
        <div class="loader-container hidden" id="evaluation-loader">
           <div class="spinner"></div>
           <p>Avaliando o prompt gerado...</p>
        </div>
        <div id="evaluation-content">
           <!-- Conte√∫do da avalia√ß√£o ser√° gerado dinamicamente -->
        </div>
      </section>

      <section id="playground-container" class="hidden transitionable">
        <h2>üöÄ Passo 3: Est√∫dio de Otimiza√ß√£o e Testes</h2>
        <p>Otimize, refine e teste seu prompt campe√£o em um loop interativo at√© atingir a perfei√ß√£o.</p>
        <form id="playground-form">
          <div class="form-group">
            <label for="playground-prompt">Prompt Atual:</label>
            <textarea id="playground-prompt" name="playground-prompt" rows="8" required></textarea>
          </div>
          <div class="optimization-group">
            <div class="form-group">
              <label for="refinement-input" class="sr-only">Instru√ß√£o de Refinamento (Loop)</label>
              <input type="text" id="refinement-input" placeholder="Instru√ß√£o de refinamento (Ex: torne mais conciso)..." />
            </div>
            <button type="button" id="optimize-prompt-button">Otimizar</button>
          </div>
          <button type="submit" id="playground-run-button">Testar Prompt</button>
        </form>
        <div id="playground-result-container" aria-live="polite" aria-busy="false">
           <div class="loader-container hidden" id="playground-loader">
            <div class="spinner"></div>
            <p>Executando o prompt...</p>
          </div>
          <div id="playground-output" class="markdown-content"></div>
        </div>
      </section>
    </main>

    <div id="audit-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Relat√≥rio de Auditoria de C√≥digo</h2>
                <button id="audit-modal-close" class="modal-close-btn">&times;</button>
            </div>
            <div id="audit-report-content" class="markdown-content">
                <!-- Conte√∫do do relat√≥rio ser√° inserido aqui -->
            </div>
        </div>
    </div>

  </body>
</html>